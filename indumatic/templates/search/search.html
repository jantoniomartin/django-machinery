{% extends 'site_base.html' %}
{% load i18n %}
{% load search_tags %}
{% load crispy_forms_tags %}

{% block body %}

<h2>{% trans "Search" %}</h2>

<form method="get" action=".">
	<table>
		{{ form|crispy }}
		<tr>
			<td>&nbsp;</td>
			<td><input type="submit" value="Search"></td>
		</tr>
	</table>

	{% if query %}
		<h3>Results</h3>
		{% for result in page.object_list %}
			{% if result != None %}
			{% with result|search_include as fragment %}
			{% include fragment %}
			{% endwith %}
			{% endif %}
		{% empty %}
			<p>No results found.</p>
		{% endfor %}

		{% if page.has_previous or page.has_next %}
			<div>
				{% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
				|
				{% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}&raquo; Next{% if page.has_next %}</a>{% endif %}
			</div>
		{% endif %}
	{% endif %}
</form>

{% endblock %}
